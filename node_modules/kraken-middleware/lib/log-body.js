var log4js = require('log4js');
var logger = log4js.getLogger();

/**
 * 调试http请求的body参数，通常配置在development.json中
 * "trace": {
 *    "enabled": true,
 *    "priority": 101,
 *    "module": {
 *         "name": "kraken-middleware/lib/log-body"
 *     }
 *  }
 */
module.exports = function() {
	return function trace(req, res, next) {
		if (req.method == 'POST' || req.method == 'PUT') {
			logger.trace(req.url, ':', req.body || {});
		}
		next();
	};
};